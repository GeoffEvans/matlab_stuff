syms d1 d2 d3 d4 d5 f1 f2 f3 f4

%order is AOD d5 l4 d4 l3 d3 l2 d2 l1 d1 OBJ

f1 = 80;
f2 = 150;
f3 = inf;
f4 = inf;

% d1 = 115.57;
% d2 = 75.72;
% d3 = 123.58;
% d4 = 197.08;
% d5 = 173.02;

l1 = [1 0; -1/f1 1];
l2 = [1 0; -1/f2 1];
l3 = [1 0; -1/f3 1];
l4 = [1 0; -1/f4 1];

k1 = [1 d1; 0 1];
k2 = [1 d2; 0 1];
k3 = [1 d3; 0 1];
k4 = [1 d4; 0 1];
k5 = [1 d5; 0 1];

m = k1 * l1 * k2 * l2 * k3 * l3 * k4 * l4 * k5;
M = m + [8/15, 0; 0 15/8];
L = 682e-3;

s = solve([M(:); d4; d5], 'd1','d2','d3', 'd4', 'd5')
d = [s.d1;s.d2;s.d3;s.d4;s.d5]
subs(d, 'z', 150)